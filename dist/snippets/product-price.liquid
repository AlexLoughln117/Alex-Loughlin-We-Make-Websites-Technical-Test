{% if product.compare_at_price > product.price %}
  {% if product.price_varies %}
    {%- assign sale_price = product.price | money -%}
    {{ 'products.product.on_sale_from_html' | t: price: sale_price }}
     <div class="sale-tag">Sale</div>
  {% else %}
   {% comment %} {{ 'products.product.on_sale' | t }}{% endcomment %}
    {{ product.price | money }}
    <div class="sale-tag">Sale</div>
  {% endif %}
{% else %}
  {% if product.price_varies %}
    {%- assign price = product.price | money -%}
    {{ 'products.product.from_text_html' | t: price: price }}
    <div class="sale-tag">Sale</div>
  {% else %}
    {{ product.price | money }}
  {% endif %}
{% endif %}